$(document).ready(async function () {
    requestNotification()
})

// $(window).unload(async function () {
//     console.log('closing');
//     triggerNotification.handleClose()
// })

async function requestNotification() {
    if (Notification.permission !== 'granted') {
        await Notification.requestPermission()
    }
    triggerNotification()
}

var triggerNotification = async () => {
    if (Notification.permission === 'denied') {
        return;
    }
    var testNotification = new Notification('To do list', {
        body: 'drink',
        icon: 'data:image/png;base64,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'
    })
    testNotification.onclick = function () {
        window.open('http://localhost:3010')
    }

    setTimeout(() => {
        handleClose()
    }, (2000));

    var handleClose = () => {
        testNotification.close()
    }

}

